
# 任意課題：RAGの実装

## 成果物

ninikadai.ipynb

HOMEWORK.md

## 扱うデータ

「神戸情報大学院大学」に関するデータを取り扱います。これは以下の背景を持つトピックです。

- 令和４年４月１日から施行されている神戸情報大学院大学の学則
- 2025年4月1日に改定された神戸情報大学院大学のデジタルパンフレット
- 上記２文書のPDFファイルをyomitokuによりマークダウン化した物

## 扱うモデル

「Qwen/Qwen3-8B-FP8」を使用します。このモデルは、以下の特徴を持ちます。

- 最近出た凄いって噂のモデルです。使ってみたいって感じです。

「Qwen/Qwen3-8B-FP8」を使用します。このモデルは、以下の特徴を持ちます。

- 上記モデルのGGUF版です。メモリ削減効果を期待してます。

## 質問設計の観点と意図
質問設計に関しては

二つの文書それぞれから正確に情報をピックアップできるか、
二つの文書にまたがる内容に正確に答えることができるか
RAGだけではなく従来の知識を活用した回答ができるか

という観点から質問を設計した。
これらの設計にはRAGの活用性能を図るとともにLLM自身の知識データベースとの融合が上手くいっているかどうかテストする意図がある。

質問の作成にはRAGに使用したデータを読み込んだGemini_2.5_pro_preview 05-06を使用した。



質問:
神戸情報大学院大学の現学長の名前と主なプロフィール（経歴や役職）を3点挙げてください。
資料: KIC_digiPanp.md
質問意図:
デジタルパンフレットから特定の人物（学長）に関する情報を正確に抽出できるか。
箇条書きや特定のセクション（PROFILE）から複数の情報をピックアップする能力を測る。

質問:
神戸情報大学院大学に入学する場合、学則第30条および別表1に定められている入学金と年間の授業料はそれぞれいくらですか？
資料: kic-gakusoku.md
質問意図:
学則の本文と別表を参照し、特定の費用項目（入学金、授業料）の金額を正確に抽出する能力を測る。
複数の箇所に分散している情報を正しく結びつける能力を測る。

質問:
神戸情報大学院大学において「フルオンライン履修制度」を利用して正規課程を修了した場合、学則に基づき授与される学位の正式名称は何ですか？
資料: KIC_digiPanp.md, kic-gakusoku.md
質問意図:
デジタルパンフレットで特定の制度（フルオンライン履修制度）が正規課程であることを理解する。
学則で学位授与に関する条項（第16条）と、そこで言及される可能性のある学位規程（本資料にはないが、第16条で触れられていることから「情報システム修士（専門職）」がパンフレット側から補完されるか、あるいは学則第5条の専攻名から類推できるか）を参照し、学位名を特定する能力を測る。
両資料にまたがる情報を関連付けて回答を生成できるか。パンフレットP.40に「学位：情報システム修士（専門職）」とあるため、これを学則の学位授与と結びつけられるか。

質問:
神戸情報大学院大学では「100カ国を超える国々からの留学生」を受け入れていることが特徴の一つです。この大学の特徴は、学則に定められる入学資格のどの項目によって具体的に支えられていると考えられますか？関連する項目を複数挙げ、その理由を説明してください。
資料: KIC_digiPanp.md, kic-gakusoku.md
質問意図:
デジタルパンフレットに記載された大学の特徴（国際性）と、学則の具体的な規定（入学資格）を結びつけて解釈する能力を測る。
学則第18条の各号（特に(2)外国での課程修了者、(3)文科大臣指定者、(5)同等以上の学力認定者など）が、パンフレットの記述する多様な留学生受け入れにどう貢献するかを論理的に説明できるか。
単なる情報抽出ではなく、規定の意図や適用範囲を推察する能力を測る。

質問：
神戸情報大学院大学に在籍する高原敏竜特任教授は、国際機関のプロジェクト調整員や企画調査員として複数の国での活動経験があります。これらの国々の一般的な開発課題をいくつか挙げてください。その上で、高原特任教授が専門とする分野が、これらの開発課題の解決にどのように貢献できる可能性があるか、具体例を交えて説明してください。
資料: KIC_digiPanp.md
必要な外部知識: ジブチ、セネガル、ニジェール、ベナンといった国々の一般的な開発課題に関する知識、ICT4Dの具体的な応用例に関する知識。
質問意図:
教員の経歴から活動地域を特定し、その地域の開発課題を外部知識で補う。
教員の専門分野（ICT4D, HCI, UX）が、それらの課題解決にどう応用できるかを具体的に考察する能力を測る。
抽象的な専門分野と具体的な社会課題を結びつける応用力、創造力を評価する


## 質問の正答について
---

RAGと同じデータを与えたGemini_2.5_pro_preview 05-06にて作成

---

質問1: 神戸情報大学院大学の現学長の名前と主なプロフィール（経歴や役職）を3点挙げてください。

**資料**: KIC_digiPanp.md

**該当箇所と情報**:
*   **ページ**: P.4 (ファイル内では `03 Kobe Institute of Computing` のページ)
*   **学長の名前**: 炭谷 俊樹
*   **PROFILEセクションより**:
    1.  東京大学理学系研究科修士課程修了(物理学専攻)
    2.  ビジネス·ブレークスルー大学大学院客員教授(経営管理専攻·問題解決思考)
    3.  ラーンネット·グローバルスクール代表

**まとめ**:
神戸情報大学院大学の現学長は**炭谷 俊樹**氏です。主なプロフィールは以下の3点です。
1.  東京大学理学系研究科修士課程修了(物理学専攻)
2.  ビジネス·ブレークスルー大学大学院客員教授(経営管理専攻·問題解決思考)
3.  ラーンネット·グローバルスクール代表

---

質問2: 神戸情報大学院大学に入学する場合、学則第30条および別表1に定められている入学金と年間の授業料はそれぞれいくらですか？

**資料**: kic-gakusoku.md

**該当箇所と情報**:
*   **学則 第30条**:
    > 第30条 入学検定料、入学金及び授業料等は、別表1の通りとする。
*   **別表1 入学金、授業料、入学検定料、その他の費用**:
    > | 区 分          | 金 額         |
    > |----------------|---------------|
    > | 入学金         | 200,000円     |
    > | 授業料(1年当たり) | 1,400,000円   |
    > | 施設·設備費(1年当たり) | 200,000円     |
    > | 入学検定料     | 30,000円      |

**まとめ**:
神戸情報大学院大学に入学する場合の費用は、学則第30条および別表1に基づき、以下の通りです。
*   **入学金**: 200,000円
*   **年間の授業料**: 1,400,000円

---

質問3: 神戸情報大学院大学において「フルオンライン履修制度」を利用して正規課程を修了した場合、学則に基づき授与される学位の正式名称は何ですか？

**資料**: KIC_digiPanp.md, kic-gakusoku.md

**該当箇所と情報**:
*   **KIC_digiPanp.md**:
    *   **ページ P.12 (ファイル内 `11 Kobe Institute of Computing`)**:
        > 「この度神戸情報大学院大学では、正規課程(専門職修士課程)をオンラインにより受講することによって、修了に必要なすべての科目を取得し、修士の学位\[情報システム修士(専門職)\]を取得するフルオンライン履修制度を開始します。」
    *   **ページ P.40 (最終ページ)**:
        > 「●学 位:情報システム修士(専門職)」
*   **kic-gakusoku.md**:
    *   **第5条 (課程·専攻)**:
        > 「本大学院に、次の課程、専攻を置く。
        > 情報技術研究科
        > 専門職学位課程 情報システム専攻」
    *   **第16条 (学位の授与)**:
        > 「本大学院において、課程修了の認定を得た者には、神戸情報大学院大学学位規程の定めるところにより学位を授与する。」

**まとめ**:
神戸情報大学院大学の「フルオンライン履修制度」は正規課程であり、これを修了した場合に授与される学位の正式名称は、デジタルパンフレットの記載および学則第5条の専攻名から「**情報システム修士（専門職）**」です。
学則第16条には「神戸情報大学院大学学位規程の定めるところにより学位を授与する」とありますが、パンフレットに具体的な学位名が明記されています。

---

質問4: 神戸情報大学院大学では「100カ国を超える国々からの留学生」を受け入れていることが特徴の一つです。この大学の特徴は、学則に定められる入学資格のどの項目によって具体的に支えられていると考えられますか？関連する項目を複数挙げ、その理由を説明してください。

**資料**: KIC_digiPanp.md, kic-gakusoku.md

**該当箇所と情報**:
*   **KIC_digiPanp.md**:
    *   **ページ P.2 (ファイル内 `01 Kobe Instutute ofc.omputing`)**:
        > 「100カ国を超える学生の多様性」
        > 「開学以降、中国やベトナム、ネパールなどアジアの学生のみならず、ルワンダ、タンザニア、モザンビークなどアフリカ諸国やアフガニスタン、シリアなど中東地域から多く学生を受け入れており、これまで受け入れた学生の出身国は100カ国を超えます。」
*   **kic-gakusoku.md**:
    *   **第18条 (入学資格)**:
        > 「本大学院に入学できる者は、次の各号の一に該当する者であって、かつ所定の選考に合格した者とする。
        > (1) 大学を卒業した者
        > (2) 外国において学校教育における16年の課程を修了した者
        > (3) 文部科学大臣の指定した者
        > (4) 専修学校の専門課程(修業年限が4年以上であることその他の文部科学大臣が定める基準を満たすものに限る。)で文部科学大臣が別に指定するものを文部科学大臣が定める日以後に修了した者
        > (5) その他、大学を卒業したと同等以上の学力があると本大学院において認められた者」

**まとめ**:
神戸情報大学院大学が「100カ国を超える国々からの留学生」を受け入れているという特徴は、学則第18条に定められる以下の入学資格項目によって具体的に支えられていると考えられます。

1.  **「(2) 外国において学校教育における16年の課程を修了した者」**
    *   **理由**: この項目は、日本国外の大学（またはそれに相当する高等教育機関）で正規の学士課程（通常16年）を修了した者を対象としています。これにより、世界各国の大学卒業者が直接的に本大学院の入学資格を得られるため、多様な国からの留学生受け入れの基盤となります。

2.  **「(3) 文部科学大臣の指定した者」**
    *   **理由**: この項目は、文部科学大臣が個別に指定する条件を満たす者に入学資格を認めるものです。これには、特定の国や地域の教育制度に基づく資格や、国際的な教育プログラムの修了者などが含まれる可能性があり、標準的な16年課程以外の多様な教育背景を持つ留学生の受け入れを可能にします。

3.  **「(5) その他、大学を卒業したと同等以上の学力があると本大学院において認められた者」**
    *   **理由**: この項目は、本大学院が独自の判断で、大学卒業者と同等以上の学力があると認めた者に入学資格を与えるものです。これにより、例えば実務経験が豊富であるが学歴が標準的な基準と異なる場合や、特定の分野で顕著な実績を持つ者など、画一的な基準では測れない多様なバックグラウンドを持つ国内外の志願者に対して門戸を開くことができ、国際的な学生の多様性に貢献します。

これらの項目が組み合わさることで、さまざまな教育制度や経歴を持つ世界中の人々が神戸情報大学院大学で学ぶ機会を得られるようになっています。


---

質問5:神戸情報大学院大学に在籍する高原敏竜特任教授は、国際機関のプロジェクト調整員や企画調査員として複数の国での活動経験があります。これらの国々の一般的な開発課題をいくつか挙げてください。その上で、高原特任教授が専門とする分野が、これらの開発課題の解決にどのように貢献できる可能性があるか、具体例を交えて説明してください。

**資料**: KIC_digiPanp.md

**必要な外部知識**:
*   高原特任教授の活動経験国（ジブチ、セネガル、ニジェール、ベナン）の一般的な開発課題
*   ICT4D、HCI、UXの具体的な応用例

**回答に必要な情報と考察のポイント（コンパクト版）:**

1.  **高原特任教授の活動経験国（パンフレットP.14より）:**
    *   ジブチ、セネガル、ニジェール、ベナン

2.  **上記国々の一般的な開発課題（外部知識より例示）:**
    *   **教育**: 教育機会の地域間格差、教育の質の低さ、識字率の課題
    *   **保健医療**: 医療アクセス不良、乳幼児死亡率、感染症対策
    *   **農業・食料安全保障**: 低い農業生産性、気候変動への脆弱性、市場アクセスの困難
    *   **インフラ**: 電気・水道・通信網の未整備、交通網の不備
    *   **経済・雇用**: 貧困、若年層の失業、産業育成の遅れ
    *   **ガバナンス**: 行政サービスの非効率性、情報公開の不足

3.  **高原特任教授の専門分野（パンフレットP.14、P.25より）:**
    *   ICT4D (Information and Communication Technology for Development)
    *   HCI (Human Computer Interaction)
    *   UX (User Experience)
    *   （研究室理念より補足：多様性、文化親和性、人文分野への関心、映像的アプローチ）

4.  **専門分野による開発課題解決への貢献可能性（具体例）：**
    *   **教育課題への貢献例:**
        *   **ICT4D**: 現地の言語や文化に合わせたインタラクティブな教育コンテンツ（HCI/UXデザイン）をモバイル端末で提供し、遠隔地の子供たちや成人非識字者向けの学習機会を創出。
        *   **映像的アプローチ**: 理解しやすい映像教材の開発・普及。
    *   **保健医療課題への貢献例:**
        *   **ICT4D**: 地域保健員向けの診断支援アプリや患者情報管理システム（使いやすいHCI/UX）を開発し、医療サービスの質と効率を向上。妊産婦ケアや予防接種の啓発にSMSや音声メッセージを活用。
    *   **農業課題への貢献例:**
        *   **ICT4D**: 農家向けに気象情報、市場価格、栽培技術情報を提供するモバイルサービス（HCI/UXを考慮したインターフェース）を開発。サプライチェーン管理の透明化。
        *   **UX**: 現地農家のニーズや利用環境を徹底的に調査し、本当に役立つ情報提供の形をデザイン。
    *   **ガバナンス課題への貢献例:**
        *   **ICT4D**: 行政手続きのオンライン化や市民からのフィードバック収集プラットフォーム（アクセシブルなHCI/UX）を構築し、行政の透明性と効率性を向上。
        *   **HCI/UX**: 多様な識字レベルやICTスキルを持つ住民が容易に利用できるデザインを追求。

**コンパクトなまとめ:**
高原特任教授は、ジブチ、セネガル、ニジェール、ベナンでの活動経験があります。これらの国々では、教育格差、医療アクセス不良、低い農業生産性、インフラ未整備といった開発課題が一般的です。
教授の専門であるICT4D、HCI、UXは、これらの課題に対し、
*   **教育**: 現地文化に適応したモバイル学習コンテンツの提供。
*   **保健医療**: 地域保健員向け診断支援アプリや患者管理システムの開発。
*   **農業**: 農家向け気象・市場情報提供モバイルサービスの構築。
*   **ガバナンス**: アクセシブルな行政サービスプラットフォームの構築。
といった形で、現地のニーズと文化を尊重（HCI/UXの視点）した技術活用を通じて貢献できる可能性があります。

## RAGの実装方法と工夫点

当初、学則（15kb）のみで実験を行った際には、単純なRAGで動作を確認、学則の内容に沿った質問で正答を得た。
その後RAGの内容を拡大し、学則＋パンフレット（約170kb）の運用にしたところGPUのメモリが溢れ処理にかかる時間が増大した。
そのため、langchain-text-splittersによるチャンク化とバッチサイズの変更を導入し解決を図った。
しかし、RAG検索で該当部分が呼び出されておらず、チャンク化及び検索が上手くいかず精度が著しく下がることになった。
そこで、まずはチャンク分けの方法について検討した。
今回使用しているQwen3はコンテキスト長が128Kまで対応しているため、これを利用し疑似的なセマンティックチャンクができないかと考えた。



## 結果の分析と考察
RAGのないベースの解答では完全な幻覚解答であった。その後、学則のみのサイズの小さいチャンク化などをしないデータでは高い精度で解答をすることができた。
データサイズが充分に大きくなりチャンク化などの必要性が出てくると、チャンク分けの精度と検索精度を充分に上げることが出来ておらず、RAG側から誤った参考情報が提出された。
その結果、LLMの解答は自身の幻覚ではなく誤ったRAG情報を元にした誤答となった。

RAGを作成する場合はいかに正確な情報を出すことができるかという事が大事

